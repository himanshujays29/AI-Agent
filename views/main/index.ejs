<% layout('/layout/layout') -%>
<div class="max-w-5xl mx-auto py-4">
  <h1 class="text-3xl font-bold text-center mb-6">
    ğŸ“š Exam Preparation Dashboard
  </h1>

  <div class="card">
    <form id="studyForm">
      <label class="block mb-2 text-lg">Select Model:</label>
      <select
        id="model"
        class="model-dropdown w-full"
      >
        <option value="gemini-2.5-flash-lite" selected>
          Gemini 2.5 Flash Lite (Fast)
        </option>
        <option value="gemini-2.5-flash">Gemini 2.5 Flash (Detailed)</option>
      </select>

      <input
        id="topic"
        placeholder="Enter topic e.g. HTML, CSS, Databases"
        class="border border-gray-300 rounded-lg px-3 py-2 w-full mb-4"
      />

      <button
        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
      >
        Start Study
      </button>
    </form>
  </div>

  <div id="status" class="my-4 text-chatgpt-subtle text-sm"></div>

  <div id="output" class="hidden">
    <div class="card">
      <h2 class="text-2xl font-semibold mb-2">ğŸ” Research</h2>
      <!-- Markdown body with transparent background for dark mode -->
      <div id="research" class="prose markdown-body" style="background-color: transparent;"></div>
    </div>
<hr>
    <div class="card">
      <h2 id="summryoutput" class="text-2xl font-semibold mb-2">ğŸ§  Summary</h2>
      <!-- Markdown body with transparent background for dark mode -->
      <div id="summary" class="prose markdown-body" style="background-color: transparent;"></div>
    </div>
<hr>

    <div
      id="quizOutput"
      class="hidden card markdown-body mt-4"
      style="background-color: transparent;"
    ></div>
<hr>
    
    <div
      id="flashcardOutput"
      class="hidden card markdown-body mt-4"
      style="background-color: transparent;"
    ></div>

    

    <div
      id="diagramWrapper"
      class="hidden relative card mt-4"
    >
      <div class="absolute top-2 right-2 flex gap-2 z-20">
        <button id="zoomInBtn" class="mind-btn">+</button>
        <button id="zoomOutBtn" class="mind-btn">âˆ’</button>
        <button id="resetZoomBtn" class="mind-btn">âŸ³</button>
        <button id="fullScreenBtn" class="mind-btn">â›¶</button>
      </div>
      <!-- Fixed container: bg-white for diagram visibility, pre-wrap for debugging raw text -->
      <div id="mindmapContainer" class="w-full h-72 overflow-hidden bg-white rounded-lg">
        <div id="mindmapDiagram" class="mermaid" style="white-space: pre-wrap;"></div>
      </div>
    </div>


    <button
      id="generateQuizBtn"
      class="mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 hidden"
    >
      ğŸ¯ Generate Quiz
    </button>
     <button
      id="generateFlashcardsBtn"
      class="mt-4 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 hidden"
    >
      ğŸ“˜ Generate Flashcards
    </button>

     <button
      id="exportPdfBtn"
      class="mt-4 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 hidden"
    >
      ğŸ“„ Export Notes to PDF
    </button>
   
    <button
      id="generateDiagramBtn"
      class="mt-4 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 hidden"
    >
      ğŸ§  Generate Mind Map
    </button>

  </div>
</div>